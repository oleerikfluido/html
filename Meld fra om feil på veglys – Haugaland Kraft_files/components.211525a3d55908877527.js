(function(e){function t(t){for(var n,r,s=t[0],l=t[1],c=t[2],u=0,f=[];u<s.length;u++)r=s[u],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&f.push(a[r][0]),a[r]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);d&&d(t);while(f.length)f.shift()();return o.push.apply(o,c||[]),i()}function i(){for(var e,t=0;t<o.length;t++){for(var i=o[t],n=!0,s=1;s<i.length;s++){var l=i[s];0!==a[l]&&(n=!1)}n&&(o.splice(t--,1),e=r(r.s=i[0]))}return e}var n={},a={3:0},o=[];function r(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=n,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var d=l;o.push([121,5,0]),i()})({121:function(e,t,i){e.exports=i(132)},132:function(e,t,i){"use strict";i.r(t);var n=i(0),a=i.n(n),o=i(1),r=i.n(o),s=i(28),l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.form?i("form",{ref:"form",staticClass:"form",on:{submit:function(t){return t.preventDefault(),e.handleSubmit(t)},input:e.checkValidation}},[i("div",{staticClass:"form__top"}),e._v(" "),e.form.pagination?i("div",{staticClass:"form__pagination alignfull"},[e._l(e.form.pagination.pages,function(t,n){return i("span",{key:n,staticClass:"form__pagination--page",class:{"form__pagination--page-progress":n<e.currentPage,"form__pagination--page-valid":e.currentPageValid&&n===e.currentPage-1||n<e.currentPage-1}},[i("i",[i("svg",{attrs:{role:"presentation"}},[i("use",{attrs:{"xlink:href":e.themedir+"/images/icons.svg#check"}})])]),e._v(" "),i("span",[e._v(e._s(t))])])}),e._v(" "),i("span",{staticClass:"form__pagination--page",class:{"form__pagination--page-progress":e.currentPage==e.form.pagination.pages.length+1,"form__pagination--page-valid":e.currentPageValid&&Object.keys(e.formPages).length+1===e.currentPage}},[i("i",[i("svg",{attrs:{role:"presentation"}},[i("use",{attrs:{"xlink:href":e.themedir+"/images/icons.svg#check"}})])]),e._v(" "),i("span",[e._v(e._s(e.form.pagination.progressbar_completion_text))])])],2):e._e(),e._v(" "),i("div",{staticClass:"form__pages"},[e._l(e.formPages,function(t,n){return i("div",{directives:[{name:"show",rawName:"v-show",value:n==e.currentPage,expression:"i == currentPage"}],key:n,staticClass:"row form__pages--page",class:{"form__pages--page-current":n==e.currentPage}},[i("div",{staticClass:"col-s-6"},[e._l(e.nonAdministrativeFields(t),function(t,n){return i("div",{key:n},["html"===t.type?i("div",{class:{"form__field--conditionally-hidden":t.hidden||"hidden"==t.visibility,"form__field--conditionally-hidable":t.conditionalLogic},domProps:{innerHTML:e._s(t.content)}}):e._e(),e._v(" "),"section"===t.type?i("div",{class:{"form__field--conditionally-hidden":t.hidden||"hidden"==t.visibility,"form__field--conditionally-hidable":t.conditionalLogic}},[i("h2",[e._v(e._s(t.label))]),e._v(" "),t.description?i("p",[e._v(e._s(t.description))]):e._e()]):e._e(),e._v(" "),"checkbox"===t.type?i("fieldset",{staticClass:"form__field-group",class:{"form__field--conditionally-hidden":t.hidden||"hidden"==t.visibility,"form__field--conditionally-hidable":t.conditionalLogic}},[i("legend",{class:{hidden:"hidden_label"===t.labelPlacement}},[e._v(e._s(t.label)+" "),t.isRequired?e._e():i("small",[e._v("- valgfritt")]),e._v(" "),t.description&&"above"===t.descriptionPlacement?i("em",[e._v(e._s(t.description))]):e._e()]),e._v(" "),i("ul",{class:"form__field--"+t.type},e._l(t.choices,function(n,a){return i("li",{key:a},[i("label",[i("input",{attrs:{type:t.type,name:"input_"+t.id+("checkbox"===t.type?"_"+(a+1):""),tabindex:t.hidden?-1:0},domProps:{value:n.value,checked:n.isSelected},on:{click:function(t){return e.updateCheckbox(t,n)}}}),e._v(" "),i("span",[e._v(e._s(n.text))])])])}),0),e._v(" "),t.description&&"above"!==t.descriptionPlacement?i("em",[e._v(e._s(t.description))]):e._e()]):e._e(),e._v(" "),"radio"===t.type?i("fieldset",{staticClass:"form__field-group",class:{"form__field--conditionally-hidden":t.hidden||"hidden"==t.visibility,"form__field--conditionally-hidable":t.conditionalLogic}},[i("legend",{class:{hidden:"hidden_label"===t.labelPlacement}},[e._v(e._s(t.label)+" "),t.description&&"above"===t.descriptionPlacement?i("em",[e._v(e._s(t.description))]):e._e()]),e._v(" "),i("ul",{class:"form__field--"+t.type},e._l(t.choices,function(n,a){return i("li",{key:a},[i("label",[i("input",{attrs:{type:t.type,name:"input_"+t.id,tabindex:t.hidden?-1:0},domProps:{value:n.value,checked:n.isSelected},on:{click:function(i){return e.updateRadio(n,t.choices)}}}),e._v(" "),i("span",[e._v(e._s(n.text))])])])}),0),e._v(" "),t.description&&"above"!==t.descriptionPlacement?i("em",[e._v(e._s(t.description))]):e._e()]):e._e(),e._v(" "),"select"===t.type?i("div",{staticClass:"form__field-group",class:["form__field--"+t.type,{"form__field--conditionally-hidden":t.hidden||"hidden"==t.visibility,"form__field--conditionally-hidable":t.conditionalLogic}]},[i("label",{attrs:{for:t.formId+"-"+t.id}},[e._v(e._s(t.label)+" "),t.description&&"above"===t.descriptionPlacement?i("em",[e._v(e._s(t.description))]):e._e()]),e._v(" "),i("div",{staticClass:"form__field--select-wrapper"},[i("select",{attrs:{id:t.formId+"-"+t.id,name:"input_"+t.id,"data-valid":t.isValid,tabindex:t.hidden?-1:0},on:{change:function(i){return e.updateSelect(i.target.value,t)}}},e._l(t.choices,function(t,n){return i("option",{key:n,domProps:{value:t.value,selected:t.isSelected}},[e._v(e._s(t.text))])}),0)]),e._v(" "),t.description&&"above"!==t.descriptionPlacement?i("em",[e._v(e._s(t.description))]):e._e()]):e._e(),e._v(" "),"text"===t.type||"number"===t.type||"email"===t.type?i("div",{staticClass:"form__field-group",class:["form__field--"+t.type,{"form__field--conditionally-hidden":t.hidden||"hidden"==t.visibility,"form__field--conditionally-hidable":t.conditionalLogic}]},[i("label",{attrs:{for:t.formId+"-"+t.id}},[e._v(e._s(t.label)+" "),t.isRequired?e._e():i("small",[e._v("- valgfritt")]),e._v(" "),t.description&&"above"===t.descriptionPlacement?i("em",[e._v(e._s(t.description))]):e._e()]),e._v(" "),"checkbox"===t.type?i("input",{directives:[{name:"model",rawName:"v-model",value:t.defaultValue,expression:"field.defaultValue"}],attrs:{name:"input_"+t.id,id:t.formId+"-"+t.id,placeholder:t.placeholder,required:t.isRequired&&!t.hidden,"data-valid":t.isValid,tabindex:t.hidden?-1:0,type:"checkbox"},domProps:{checked:Array.isArray(t.defaultValue)?e._i(t.defaultValue,null)>-1:t.defaultValue},on:{change:function(i){var n=t.defaultValue,a=i.target,o=!!a.checked;if(Array.isArray(n)){var r=null,s=e._i(n,r);a.checked?s<0&&e.$set(t,"defaultValue",n.concat([r])):s>-1&&e.$set(t,"defaultValue",n.slice(0,s).concat(n.slice(s+1)))}else e.$set(t,"defaultValue",o)}}}):"radio"===t.type?i("input",{directives:[{name:"model",rawName:"v-model",value:t.defaultValue,expression:"field.defaultValue"}],attrs:{name:"input_"+t.id,id:t.formId+"-"+t.id,placeholder:t.placeholder,required:t.isRequired&&!t.hidden,"data-valid":t.isValid,tabindex:t.hidden?-1:0,type:"radio"},domProps:{checked:e._q(t.defaultValue,null)},on:{change:function(i){return e.$set(t,"defaultValue",null)}}}):i("input",{directives:[{name:"model",rawName:"v-model",value:t.defaultValue,expression:"field.defaultValue"}],attrs:{name:"input_"+t.id,id:t.formId+"-"+t.id,placeholder:t.placeholder,required:t.isRequired&&!t.hidden,"data-valid":t.isValid,tabindex:t.hidden?-1:0,type:t.type},domProps:{value:t.defaultValue},on:{input:function(i){i.target.composing||e.$set(t,"defaultValue",i.target.value)}}}),e._v(" "),t.description&&"above"!==t.descriptionPlacement?i("em",[e._v(e._s(t.description))]):e._e()]):e._e(),e._v(" "),"textarea"===t.type?i("div",{staticClass:"form__field-group",class:["form__field--"+t.type,{"form__field--conditionally-hidden":t.hidden||"hidden"==t.visibility,"form__field--conditionally-hidable":t.conditionalLogic}]},[i("label",{attrs:{for:t.formId+"-"+t.id}},[e._v(e._s(t.label)+" "),t.isRequired?e._e():i("small",[e._v("- valgfritt")]),e._v(" "),t.description&&"above"===t.descriptionPlacement?i("em",[e._v(e._s(t.description))]):e._e()]),e._v(" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.defaultValue,expression:"field.defaultValue"}],attrs:{name:"input_"+t.id,id:t.formId+"-"+t.id,"data-valid":t.isValid,tabindex:t.hidden?-1:0},domProps:{value:t.defaultValue},on:{input:function(i){i.target.composing||e.$set(t,"defaultValue",i.target.value)}}}),e._v(" "),t.description&&"above"!==t.descriptionPlacement?i("em",[e._v(e._s(t.description))]):e._e()]):e._e()])}),e._v(" "),n<Object.keys(e.formPages).length?i("div",[n>1?i("button",{staticClass:"btn btn-plain",attrs:{type:"button"},on:{click:e.previousPage}},[i("span",[e._v(e._s(e.firstPage.previousButton.text))])]):e._e(),e._v(" "),i("button",{staticClass:"btn btn-arrow btn-arrow-fixed",attrs:{type:"button",disabled:!e.currentPageValid},on:{click:e.nextPage}},[i("span",[e._v(e._s(e.firstPage.nextButton.text))])])]):e._e(),e._v(" "),n==Object.keys(e.formPages).length?i("div",[i("input",{staticStyle:{display:"none !important"},attrs:{type:"checkbox",name:"ja_takk_begge_deler",value:"1",tabindex:"-1",autocomplete:"off"}}),e._v(" "),n>1?i("button",{staticClass:"btn btn-plain",attrs:{type:"button"},on:{click:function(t){return e.previousPage(!0)}}},[i("span",[e._v(e._s(e.firstPage.previousButton.text))])]):e._e(),e._v(" "),i("button",{staticClass:"btn btn-solid btn-arrow btn-arrow-fixed",attrs:{type:"submit",disabled:!e.currentPageValid||e.posting}},[e._v(e._s(e.form.button.text))])]):e._e()],2),e._v(" "),e.pageImages.length>=n?i("div",{staticClass:"col-s-6"},[i("img",{staticClass:"form__pages--image",attrs:{src:e.currentPageValid?e.pageImages[n-1][1]:e.pageImages[n-1][0],alt:"",role:"presentation"}})]):e._e()])}),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:Object.keys(e.formPages).length+1===e.currentPage,expression:"Object.keys(formPages).length + 1 === currentPage"}],staticClass:"form__pages--page form__pages--page-confirmation row",class:{"form__pages--page-current":e.formPages.length+1==e.currentPage}},[i("div",{class:{"col-s-6":e.confirmationImage},domProps:{innerHTML:e._s(e.formConfirmation)}}),e._v(" "),e.confirmationImage?i("div",{staticClass:"col-s-6"},[i("img",{attrs:{src:e.confirmationImage,role:"presentation"}})]):e._e()])],2)]):e._e()},c=[],d=i(17),u=i.n(d),f=i(57),p=i.n(f),m=i(58),h=i.n(m),v=(i(43),{name:"HkraftForm",components:{},props:["formId"],data:function(){return{form:null,themedir:window.MAIN.themedir,currentPage:1,currentPageValid:!1,formConfirmation:null,pageImages:window.hkraftFormPageImages||[],confirmationImage:window.hkraftFormPageConfirmationImage||!1,posting:!1}},computed:{formPages:function(){var e=this,t=this.form.fields.reduce(function(t,i){return t[i.pageNumber]=t[i.pageNumber]||[],e.$set(i,"isValid",!1),e.$set(i,"hidden",e.hideField(i)),t[i.pageNumber].push(i),t},h()(null));return t},firstPage:function(){var e=this.form.fields.find(this.isFieldPage);return e}},methods:{nonAdministrativeFields:function(e){return e.filter(function(e){return"administrative"!==e.visibility})},updateCheckbox:function(e,t){t.isSelected=e.target.checked,this.checkValidation()},updateRadio:function(e,t){for(var i=0;i<t.length;i++)t[i].isSelected=!1;e.isSelected=!0,this.checkValidation()},updateSelect:function(e,t){for(var i=0;i<t.choices.length;i++){var n=t.choices[i];n.isSelected=n.value===e,n.value===e&&(t.selectValue=e)}this.checkValidation()},isFieldPage:function(e){return"page"===e.type},previousPage:function(e){this.currentPage--,e&&(this.currentPageValid=!1,this.checkValidation()),this.scrollToPagination()},nextPage:function(){this.currentPage++,this.currentPageValid=!1,this.checkValidation(),this.scrollToPagination()},hideField:function(e){var t=this;if(e.conditionalLogic){for(var i=[],n=function(n){var a=e.conditionalLogic.rules[n],o=t.getField(a.fieldId),r=!1;switch(o.type){case"checkbox":case"radio":case"select":var s=o.choices.find(function(e){return e.value==a.value});switch(a.operator){case"is":r=s.isSelected;break;case"isnot":r=!s.isSelected;break}break;default:break}"show"===e.conditionalLogic.actionType?i.push(!r):i.push(r)},a=0;a<e.conditionalLogic.rules.length;a++)n(a);var o=i.indexOf(!0)>=0,r=i.indexOf(!1)>=0;if("show"===e.conditionalLogic.actionType&&"any"===e.conditionalLogic.logicType)return!r;if("show"===e.conditionalLogic.actionType&&"all"===e.conditionalLogic.logicType)return o;if("hide"===e.conditionalLogic.actionType&&"any"===e.conditionalLogic.logicType)return!o;if("hide"===e.conditionalLogic.actionType&&"all"===e.conditionalLogic.logicType)return r}return!1},checkValidation:_.debounce(function(){var e=!0;if(p()(this.formPages).length>=this.currentPage)for(var t=0;t<this.formPages[this.currentPage].length;t++){var i=this.formPages[this.currentPage][t];if(i.isRequired&&!i.hidden){var n=this.checkFormElementValidity(i);n?i.isValid=!0:(i.isValid=!1,e=!1)}else i.isValid=!0}this.currentPageValid=e},50),checkFormElementValidity:function(e){switch(e.type){case"checkbox":case"radio":return this.checkCheckboxValidity(e);case"select":return this.checkSelectValidity(e);case"text":case"number":case"textarea":return""!=e.defaultValue;case"email":var t=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;return t.test(String(e.defaultValue).toLowerCase());default:return!0}},checkCheckboxValidity:function(e){for(var t=0;t<e.choices.length;t++){var i=e.choices[t];if(!0===i.isSelected)return!0}return!1},checkSelectValidity:function(e){for(var t=0;t<e.choices.length;t++){var i=e.choices[t];if(!0===i.isSelected&&i.value)return!0}return!1},getField:function(e){return this.form.fields.find(function(t){return t.id==e})},getForm:function(){var e=this;fetch("/wp-json/hkraft/form/get/"+this.formId,{method:"GET",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(t){e.form=t,e.checkValidation()}).catch(function(){})},handleSubmit:function(){var e=this;this.posting=!0;var t=new FormData(this.$refs.form),i={};t.forEach(function(e,t){i[t]=e}),fetch("/wp-json/hkraft/form/submit/"+this.formId,{method:"POST",headers:{"Content-Type":"application/json"},body:u()(i)}).then(function(e){return e.json()}).then(function(t){t.is_valid&&(window.dataLayer&&window.dataLayer.push({event:"form-submit",id:e.form.id,title:e.form.title}),"redirect"===t.confirmation_type?window.location.href=t.confirmation_redirect:(e.formConfirmation=t.confirmation_message,e.nextPage(),e.posting=!1))}).catch(function(e){console.log("error",e)})},scrollToPagination:function(){var e=document.querySelector(".form__top");if(e){var t=document.querySelector("header"),i=t.offsetHeight;this.isScrolledIntoView(e,i)||window.scroll({top:e.offsetTop-i,left:0,behavior:"smooth"})}},isScrolledIntoView:function(e,t){var i=e.getBoundingClientRect(),n=i.top,a=i.bottom,o=n>=t&&a<=window.innerHeight;return o}},mounted:function(){this.getForm()}}),g=v,b=i(18),y=Object(b["a"])(g,l,c,!1,null,null,null),P=y.exports,k=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("form",{ref:"form",staticClass:"newsletter-signup form",attrs:{action:"/"},on:{submit:function(t){return t.preventDefault(),e.handleSubmit(t)},input:e.checkValidation}},[e.formConfirmation?e._e():i("div",[i("label",{attrs:{for:e.formId+"email"}},[e._v("Skriv inn epost her")]),e._v(" "),i("div",{staticClass:"input-group"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],attrs:{id:e.formId+"email",type:"email",name:"email",disabled:e.posting,placeholder:"Din e-postadresse"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),e._v(" "),i("input",{staticStyle:{display:"none !important"},attrs:{type:"checkbox",name:"ja_takk_begge_deler",value:"1",tabindex:"-1",autocomplete:"off"}}),e._v(" "),i("button",{staticClass:"btn btn-solid",attrs:{type:"submit",disabled:e.posting||!e.isValid}},[e._v("Meld på")])])]),e._v(" "),e.formConfirmation?i("div",{staticClass:"form-confirmation"},[i("h2",[e._v(e._s(e.formConfirmation))])]):e._e(),e._v(" "),i("p",{staticClass:"newsletter-signup__links"},[e.privacyUrl?i("a",{attrs:{href:e.privacyUrl}},[e._v("Personvernerklæring")]):e._e(),e._v(" "),e.contactUrl?i("a",{attrs:{href:e.contactUrl}},[e._v("Kontakt oss")]):e._e()])])},w=[],V={name:"HkraftNewsletterSubmit",props:["formId","privacyUrl","contactUrl"],data:function(){return{formConfirmation:"",posting:!1,email:"",isValid:!1}},methods:{handleSubmit:function(){var e=this;this.posting=!0;var t=new FormData(this.$refs.form),i={};t.forEach(function(e,t){i[t]=e}),fetch("/wp-json/hkraft/newsletter/subscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:u()(i)}).then(function(e){return e.json()}).then(function(t){e.formConfirmation=t.message,window.dataLayer&&window.dataLayer.push({event:"newsletter"})}).catch(function(e){console.log("error",e)})},checkValidation:function(){var e=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;this.isValid=e.test(String(this.email).toLowerCase())}}},x=V,C=Object(b["a"])(x,k,w,!1,null,null,null),S=C.exports,L=function(){function e(){var t=this;a()(this,e),document.addEventListener("DOMContentLoaded",function(){return t.init()}),window.addEventListener("load",function(){return t.initOnLoad()})}return r()(e,[{key:"init",value:function(){document.querySelector("hkraft-form")&&new s["a"]({el:"hkraft-form",render:function(e){return e(P,{props:{formId:this.$el.attributes.formid.value}})}}),document.querySelector("hkraft-newsletter-signup")&&new s["a"]({el:"hkraft-newsletter-signup",render:function(e){return e(S,{props:{formId:this.$el.attributes.formid.value,privacyUrl:this.$el.attributes.privacyurl.value,contactUrl:this.$el.attributes.contacturl.value}})}})}},{key:"initOnLoad",value:function(){}}]),e}();window.hkraftComponents=new L}});